<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TeasyPay Microaccounts API Documentation</title>
    <link rel="icon" type="image/png" href="images/teasylogoon.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/monokai.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background-color: #f4f7f9;
            --card-color: #ffffff;
            --text-color: #4a4a4a;
            --code-bg: #2d2d2d;
            --code-text: #cccccc;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
        }

        /* Responsive styling for the sidebar and main content */
        #sidebar {
            width: 280px;
            background-color: var(--primary-color);
            color: white;
            padding: 2rem 0;
            position: fixed;
            height: 100%;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            left: -280px;
            /* Initially hidden on mobile */
            transition: left 0.3s ease-in-out;
            text-align: center;
        }

        #sidebar.active {
            left: 0;
        }

        #sidebar h2 {
            display: none;
            /* Hide the h2 text */
        }

        #sidebar a {
            display: block;
            color: #d1d9e2;
            padding: 0.75rem 2rem;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;
        }

        #sidebar a:hover,
        #sidebar a.active {
            background-color: var(--secondary-color);
            color: white;
        }

        #sidebar-logo {
            width: 150px;
            margin-bottom: 2rem;
        }

        #main-content {
            padding: 2rem 4rem;
            transition: margin-left 0.3s ease-in-out;
        }

        #menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: block;
            /* Shown on mobile by default */
        }

        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        h1,
        h2,
        h3 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
            margin-top: 3rem;
        }

        .section {
            margin-bottom: 3rem;
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            position: relative;
            margin-top: 1rem;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        code:not(pre code) {
            background-color: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }

        /* Desktop view: Sidebar is always visible */
        @media (min-width: 769px) {
            body {
                display: flex;
            }

            #sidebar {
                position: fixed;
                left: 0;
            }

            #main-content {
                margin-left: 280px;
                padding: 2rem 4rem;
                flex-grow: 1;
            }

            #menu-toggle {
                display: none;
            }
        }
    </style>
</head>

<body>
    <button id="menu-toggle">â˜°</button>
    <div class="backdrop" id="backdrop"></div>

    <aside id="sidebar">
        <h2>TeasyPay Docs</h2>
        <img id="sidebar-logo" src="images/teasylogoon.png" alt="TeasyPay Logo" />
        <nav>
            <a href="#introduction">1.0 Introduction</a>
            <a href="#authentication">2.0 Authentication & Security</a>
            <a href="#token">2.1 Token Generation</a>
            <a href="#headers">2.2 Request Headers</a>
            <a href="#signature-generation">2.3 Signature Generation</a>
            <a href="#endpoints">3.0 Endpoints</a>
            <a href="#static-account">3.1 Static Account</a>
            <a href="#dynamic-account">3.2 Dynamic Account</a>
            <a href="#verify-transaction">3.3 Verify Transaction</a>
            <a href="#get-static">3.4 Get Static Accounts</a>
            <a href="#simulate-transfer">3.5 Simulate Transfer</a>
            <a href="#webhooks">4.0 Webhooks</a>
        </nav>
    </aside>

    <main id="main-content">
        <h1 id="introduction">TeasyPay Microaccounts API Documentation</h1>
        <p><strong>Version 1.0</strong></p>
        <p>
            The TeasyPay Microaccounts API provides a robust and secure way for
            businesses to manage and automate payment collections through virtual
            and static accounts. This documentation serves as a guide for developers
            to integrate with our system, covering authentication, signature
            generation, and the core API endpoints for account creation and
            transaction verification.
        </p>
        <p>
            All API communication is secured using HTTPS and requires a valid JWT
            Bearer Token for authentication and an HMAC-SHA256 signature for request
            integrity. All request and response bodies are formatted as JSON.
        </p>

        <hr />

        <h2 id="authentication">2.0 Authentication & Security</h2>
        <p>
            All API calls must be authenticated and secured using a combination of a
            JWT Bearer Token and HMAC-SHA256 signature headers.
        </p>

        <h3 id="token">2.1 Generating an Access Token</h3>
        <p>
            To begin, you must generate a short-lived access token using your unique
            <code>client_id</code> and <code>client_secret</code>. This token
            expires in 1 hour and must be refreshed.
        </p>
        <h4>Endpoint:</h4>
        <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/tokentest/v1/generatetoken</code></pre>
        <h4>Headers:</h4>
        <pre><code class="language-json">Content-Type: application/json</code></pre>
        <h4>Request Body:</h4>
        <pre><code class="language-json">{
  "client_id": "teasytest",
  "client_secret": "407bbad913f49806c66c05702fec2285"
}</code></pre>
        <h4>Successful Response:</h4>
        <pre><code class="language-json">{
  "code": "00",
  "status": "success",
  "expires": "1 hour",
  "description": "Token generated successfully",
  "Bearer": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiJ0ZWFzeXRlc3QiLCJleHAiOjE3NTgyMjMzMjR9.dXTMLN785nhsEB6qqg2lo2kufccTCTY4-a2fuUnCRjY"
  }
}</code></pre>

        <h3 id="headers">2.2 Request Headers</h3>
        <p>
            Once you have a valid token, every subsequent API request must include
            the following headers:
        </p>
        <table>
            <thead>
                <tr>
                    <th>Header</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Authorization</code></td>
                    <td>The JWT access token. Format: <code>Bearer {token}</code></td>
                    <td><code>Bearer eyJhbGciOiJIUz...</code></td>
                </tr>
                <tr>
                    <td><code>X-Timestamp</code></td>
                    <td>The current Unix timestamp (in seconds).</td>
                    <td><code>1752431097</code></td>
                </tr>
                <tr>
                    <td><code>X-Signature</code></td>
                    <td>The HMAC-SHA256 signature. See next section.</td>
                    <td><code>0841e0c3b67efafb4f...</code></td>
                </tr>
                <tr>
                    <td><code>X-IV</code></td>
                    <td>The Initialization Vector (IV) for encryption.</td>
                    <td><code>WU0e/f==</code></td>
                </tr>
                <tr>
                    <td><code>Content-Type</code></td>
                    <td>Must be <code>application/json</code>.</td>
                    <td><code>application/json</code></td>
                </tr>
            </tbody>
        </table>

        <h3 id="signature-generation">2.3 Signature Generation</h3>
        <p>
            The <code>X-Signature</code> header is a cryptographic signature that
            verifies the integrity of your request. It is generated by computing an
            <strong>HMAC-SHA256 hash</strong> of the concatenated string of the
            <code>mainWalletNo</code> and the <code>X-Timestamp</code>, using your
            private API key (<code>apkkey</code>) as the secret key.
        </p>
        <p>
            <strong>Signature Formula:</strong>
            <code>signature = HMAC-SHA256(mainWalletNo + X-Timestamp, apkkey)</code>
        </p>
        <h4>Java Code Example:</h4>
        <pre><code class="language-java">import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import java.nio.charset.StandardCharsets;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

public class SignatureHelper {
    public static String getSignature(String mainWalletNo, String apkkey) {
        String timeStamp = String.valueOf(System.currentTimeMillis() / 1000L);
        String dataToSign = mainWalletNo + timeStamp;
        
        try {
            Mac mac = Mac.getInstance("HmacSHA256");
            SecretKeySpec secretKeySpec = new SecretKeySpec(apkkey.getBytes(StandardCharsets.UTF_8), "HmacSHA256");
            mac.init(secretKeySpec);
            byte[] hmacBytes = mac.doFinal(dataToSign.getBytes(StandardCharsets.UTF_8));
            
            StringBuilder hexString = new StringBuilder();
            for (byte b : hmacBytes) {
                hexString.append(String.format("%02x", b));
            }
            return hexString.toString();
        } catch (NoSuchAlgorithmException | InvalidKeyException e) {
            throw new RuntimeException("Error generating HMAC-SHA256 signature.", e);
        }
    }
}</code></pre>

        <hr />

        <h2 id="endpoints">3.0 Endpoints</h2>

        <div class="section">
            <h3 id="static-account">3.1 Create a Static Sub-account</h3>
            <p>
                Creates a permanent sub-account tied to your main wallet for
                consistent collections.
            </p>
            <h4>Endpoint:</h4>
            <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/microaccounts/v1/addstaticaccount</code></pre>
            <h4>Request Body Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Required</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>mainWalletNo</code></td>
                        <td>string</td>
                        <td>The main wallet number.</td>
                        <td>Yes</td>
                        <td><code>2348100158586</code></td>
                    </tr>
                    <tr>
                        <td><code>city</code></td>
                        <td>string</td>
                        <td>The city of the sub-account owner.</td>
                        <td>Yes</td>
                        <td><code>Lagos</code></td>
                    </tr>
                    <tr>
                        <td><code>lga</code></td>
                        <td>string</td>
                        <td>The Local Government Area.</td>
                        <td>Yes</td>
                        <td><code>Ikeja</code></td>
                    </tr>
                    <tr>
                        <td><code>state</code></td>
                        <td>string</td>
                        <td>The state.</td>
                        <td>Yes</td>
                        <td><code>Lagos</code></td>
                    </tr>
                    <tr>
                        <td><code>address</code></td>
                        <td>string</td>
                        <td>The street address.</td>
                        <td>Yes</td>
                        <td><code>123 Allen Avenue</code></td>
                    </tr>
                    <tr>
                        <td><code>subwalletowner</code></td>
                        <td>string</td>
                        <td>The name of the sub-account owner.</td>
                        <td>Yes</td>
                        <td><code>Teasypay</code></td>
                    </tr>
                </tbody>
            </table>
            <h4>Successful Response:</h4>
            <pre><code class="language-json">{
  "code": "0",
  "status": "success",
  "accountType": "STATIC",
  "subWalletNo": "5515620688",
  "bank": "TeasyPay/Teasy Mobile",
  "accountName": "TEASY INTL. COMPANY LTD DANIEL IDAKWOJI 1 D6469",
  "message": "Subaccount created successfully"
}</code></pre>
        </div>

        <div class="section">
            <h3 id="dynamic-account">3.2 Create a Dynamic Virtual Account (DVA)</h3>
            <p>
                Generates a temporary, single-use virtual account for a specific
                transaction amount and reference.
            </p>
            <h4>Endpoint:</h4>
            <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/microaccounts/v1/adddynamicaccount</code></pre>
            <h4>Request Body Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Required</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>mainWalletNo</code></td>
                        <td>string</td>
                        <td>The main wallet number.</td>
                        <td>Yes</td>
                        <td><code>2348100158586</code></td>
                    </tr>
                    <tr>
                        <td><code>city</code></td>
                        <td>string</td>
                        <td>City of the sub-account owner.</td>
                        <td>Yes</td>
                        <td><code>Lagos</code></td>
                    </tr>
                    <tr>
                        <td><code>lga</code></td>
                        <td>string</td>
                        <td>Local Government Area.</td>
                        <td>Yes</td>
                        <td><code>Ikeja</code></td>
                    </tr>
                    <tr>
                        <td><code>state</code></td>
                        <td>string</td>
                        <td>State.</td>
                        <td>Yes</td>
                        <td><code>Lagos</code></td>
                    </tr>
                    <tr>
                        <td><code>address</code></td>
                        <td>string</td>
                        <td>Street address.</td>
                        <td>Yes</td>
                        <td><code>123 Allen Avenue</code></td>
                    </tr>
                    <tr>
                        <td><code>subwalletowner</code></td>
                        <td>string</td>
                        <td>The name of the sub-account owner.</td>
                        <td>Yes</td>
                        <td><code>Teasypay</code></td>
                    </tr>
                    <tr>
                        <td><code>expiryTime</code></td>
                        <td>string</td>
                        <td>The expiry time. Can be left empty.</td>
                        <td>No</td>
                        <td><code>""</code></td>
                    </tr>
                    <tr>
                        <td><code>dvaAmount</code></td>
                        <td>string</td>
                        <td>The specific amount for the virtual account.</td>
                        <td>Yes</td>
                        <td><code>1000</code></td>
                    </tr>
                    <tr>
                        <td><code>dvaRef</code></td>
                        <td>string</td>
                        <td>A unique reference for this transaction.</td>
                        <td>Yes</td>
                        <td><code>20250918122</code></td>
                    </tr>
                    <tr>
                        <td><code>dvaEmail</code></td>
                        <td>string</td>
                        <td>An email for transaction notifications.</td>
                        <td>No</td>
                        <td><code>testemail@gmail.com</code></td>
                    </tr>
                </tbody>
            </table>
            <h4>Successful Response:</h4>
            <pre><code class="language-json">{
  "code": "0",
  "status": "success",
  "expiryTime": 1758223124,
  "genTime": 1758219524,
  "accountType": "DVA",
  "subWalletNo": "5586696884",
  "bank": "TeasyPay/Teasy Mobile",
  "accountName": "TEASY INTL. COMPANY LTD DANIEL IDAKWOJI 1 D5095",
  "dvaAmount": "1000",
  "dvaRef": "20250918122",
  "dvaEmail": "testemail@gmail.com",
  "message": "Subaccount created successfully"
}</code></pre>
        </div>

        <div class="section">
            <h3 id="verify-transaction">3.3 Verify a Transaction</h3>
            <p>Queries the status and details of a specific transaction.</p>
            <h4>Endpoint:</h4>
            <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/microaccounts/v1/verifytransaction</code></pre>
            <h4>Request Body Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Required</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>mainWalletNo</code></td>
                        <td>string</td>
                        <td>The main wallet number.</td>
                        <td>Yes</td>
                        <td><code>2348100158586</code></td>
                    </tr>
                    <tr>
                        <td><code>subWalletNo</code></td>
                        <td>string</td>
                        <td>The sub-wallet number to verify.</td>
                        <td>Yes</td>
                        <td><code>5586696884</code></td>
                    </tr>
                    <tr>
                        <td><code>dvaRef</code></td>
                        <td>string</td>
                        <td>The unique reference for the DVA transaction.</td>
                        <td>No</td>
                        <td><code>20250918122</code></td>
                    </tr>
                </tbody>
            </table>
            <h4>Successful Response:</h4>
            <pre><code class="language-json">{
  "code": "0",
  "status": "success",
  "Transactions": [
    {
      "Transaction ID": "20250171191221121",
      "Transaction Date": "2025-09-18 19:20:17",
      "Main Wallet No": "2348100158586",
      "Sub Wallet No": "5586696884",
      "Transaction Type": "Credit",
      "Transaction Name": "Bank_Trasnfer",
      "Amount": "5000",
      "Fee": null,
      "Source Name": "Emmanuel UBA",
      "Source Number": "7031366649",
      "Destination Number": "5586696884",
      "Destination Name": "",
      "Transaction Status": "Success",
      "Response Code": "0",
      "Description": "narate",
      "Created At": "2025-09-18 18:20:17",
      "Source Bank": "Opay",
      "Destination Bank": "TeasyPay",
      "destinationBankCode": "100010",
      "sourceBankCode": "100101",
      "sessionID_unit": "11120250511111117",
      "dvaRef": "20250918122"
      }
    ]
  }</code></pre>
        </div>

        <div class="section">
            <h3 id="get-static">3.4 Get Static Accounts</h3>
            <p>
                Retrieves a list of all static sub-accounts created under a main
                wallet.
            </p>
            <h4>Endpoint:</h4>
            <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/microaccounts/v1/getstaticaccounts</code></pre>
            <h4>Request Body Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Required</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>mainWalletNo</code></td>
                        <td>string</td>
                        <td>The main wallet number.</td>
                        <td>Yes</td>
                        <td><code>2348100158586</code></td>
                    </tr>
                    <tr>
                        <td><code>subWalletNo</code></td>
                        <td>string</td>
                        <td>The specific sub-wallet number. Leave empty to get all.</td>
                        <td>No</td>
                        <td><code>""</code></td>
                    </tr>
                    <tr>
                        <td><code>posSerial</code></td>
                        <td>string</td>
                        <td>POS serial number. Leave empty if not applicable.</td>
                        <td>No</td>
                        <td><code>""</code></td>
                    </tr>
                </tbody>
            </table>
            <h4>Successful Response:</h4>
            <pre><code class="language-json">{
  "code": "0",
  "status": "success",
  "Subdata": {
    "1": {
      "MainWallet": "2348100158586",
      "SubWallet": "5515620688",
      "Organization Name": "TEASY INTL. COMPANY LTD DANIEL IDAKWOJI 1 D",
      "SubWallet Org Name": "TEASY INTL. COMPANY LTD DANIEL IDAKWOJI 1 D6469",
      "City": "Lagos",
      "LGA": "Ikeja",
      "State": "LAGOS",
      "Address": "123 Allen Avenue",
      "Status": "Inactive",
      "Created At": "2025-09-19 09:10:11"
    }
  }
}</code></pre>
        </div>

        <div class="section">
            <h3 id="simulate-transfer">
                3.5 Simulate NIP Inward Transfer (Testing Only)
            </h3>
            <p>Simulates an incoming NIP transfer for testing purposes.</p>
            <h4>Endpoint:</h4>
            <pre><code class="language-bash">POST https://payments.teasypay.ng/tap2/microaccounts/v1/nipftinwardsimulate</code></pre>
            <h4>Request Body Parameters:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Required</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>beneficiarymainWalletNo</code></td>
                        <td>string</td>
                        <td>The recipient's main wallet number.</td>
                        <td>Yes</td>
                        <td><code>2348100158586</code></td>
                    </tr>
                    <tr>
                        <td><code>beneficiarysubWalletNo</code></td>
                        <td>string</td>
                        <td>The recipient's sub-wallet number.</td>
                        <td>Yes</td>
                        <td><code>5586696884</code></td>
                    </tr>
                    <tr>
                        <td><code>twpTransactionID</code></td>
                        <td>string</td>
                        <td>A unique transaction ID from your system.</td>
                        <td>Yes</td>
                        <td><code>233434556654324</code></td>
                    </tr>
                    <tr>
                        <td><code>nipSessionID</code></td>
                        <td>string</td>
                        <td>A unique NIP session ID.</td>
                        <td>Yes</td>
                        <td><code>11120250511111117</code></td>
                    </tr>
                    <tr>
                        <td><code>nameEnquiryRef</code></td>
                        <td>string</td>
                        <td>The name enquiry reference.</td>
                        <td>Yes</td>
                        <td><code>22222025051511127</code></td>
                    </tr>
                    <tr>
                        <td><code>beneficiaryAccountName</code></td>
                        <td>string</td>
                        <td>The recipient's account name.</td>
                        <td>Yes</td>
                        <td><code>Daniel Idakwoji</code></td>
                    </tr>
                    <tr>
                        <td><code>originatorAccountName</code></td>
                        <td>string</td>
                        <td>The sender's account name.</td>
                        <td>Yes</td>
                        <td><code>Emmanuel UBA</code></td>
                    </tr>
                    <tr>
                        <td><code>originatorAccountNumber</code></td>
                        <td>string</td>
                        <td>The sender's account number.</td>
                        <td>Yes</td>
                        <td><code>7031366649</code></td>
                    </tr>
                    <tr>
                        <td><code>originatorbankName</code></td>
                        <td>string</td>
                        <td>The sender's bank name.</td>
                        <td>Yes</td>
                        <td><code>Opay</code></td>
                    </tr>
                    <tr>
                        <td><code>originatorbankCode</code></td>
                        <td>string</td>
                        <td>The sender's bank code.</td>
                        <td>Yes</td>
                        <td><code>100101</code></td>
                    </tr>
                    <tr>
                        <td><code>responseCode</code></td>
                        <td>string</td>
                        <td>The response code. <code>0</code> for success.</td>
                        <td>Yes</td>
                        <td><code>0</code></td>
                    </tr>
                    <tr>
                        <td><code>amount</code></td>
                        <td>string</td>
                        <td>The transfer amount.</td>
                        <td>Yes</td>
                        <td><code>5000</code></td>
                    </tr>
                    <tr>
                        <td><code>fee</code></td>
                        <td>string</td>
                        <td>The transaction fee.</td>
                        <td>No</td>
                        <td><code>0</code></td>
                    </tr>
                    <tr>
                        <td><code>narration</code></td>
                        <td>string</td>
                        <td>A description for the transaction.</td>
                        <td>No</td>
                        <td><code>narate</code></td>
                    </tr>
                    <tr>
                        <td><code>timestamp</code></td>
                        <td>string</td>
                        <td>The transaction timestamp.</td>
                        <td>Yes</td>
                        <td><code>2025-08-18 12:00:00</code></td>
                    </tr>
                    <tr>
                        <td><code>signature</code></td>
                        <td>string</td>
                        <td>Transaction payload signature.</td>
                        <td>No</td>
                        <td><code>a1b2c3d4e5f6</code></td>
                    </tr>
                </tbody>
            </table>
            <h4>Successful Response:</h4>
            <pre><code class="language-json">{
  "code": "0",
  "status": "success",
  "message": "Transaction successful",
  "newBalance": 10000
}</code></pre>
        </div>

        <hr />

        <div class="section">
            <h2 id="webhooks">4.0 Webhooks</h2>
            <p>
                TeasyPay uses webhooks to notify you in real-time about events that
                occur on your account, such as successful payments. This eliminates
                the need for constant polling and allows for a more efficient
                integration.
            </p>

            <h3 id="webhook-config">4.1 Webhook URL Configuration</h3>
            <p>
                To receive webhook notifications, you must configure a secure endpoint
                URL in your TeasyPay account settings. Our system will send
                <strong>HTTP POST</strong> requests with event payloads to this URL.
            </p>

            <h3 id="webhook-security">4.2 Security</h3>
            <p>
                For security, every webhook request is signed with a signature that
                you must verify to confirm its authenticity. The signature is an
                <strong>HMAC-SHA256 hash</strong> of the
                <strong>raw request body</strong>, and it is signed using your private
                API key (<code>apkkey</code>). The signature is sent in a header,
                typically <code>X-Teasy-Signature</code>.
            </p>
            <p>
                <strong>Webhook Signature Formula:</strong>
                <code>signature = HMAC-SHA256(request_body, apkkey)</code>
            </p>
            <p>
                To verify, compute the signature of the raw request body and compare
                it with the <code>X-Teasy-Signature</code> header value.
            </p>

            <h3 id="webhook-payload">4.3 Webhook Payload</h3>
            <p>
                The webhook payload is a JSON object that provides detailed
                information about the event.
            </p>
            <h4>Sample Payload:</h4>
            <pre><code class="language-json">{
  "event": "credit.successful",
  "data": {
    "code": "0",
    "status": "success",
    "Transactions": [
      {
        "Transaction ID": "20250171191221121",
        "Transaction Date": "2025-09-18 19:20:17",
        "Main Wallet No": "2348100158586",
        "Sub Wallet No": "5586696884",
        "Transaction Type": "Credit",
        "Transaction Name": "Bank_Trasnfer",
        "Amount": "5000",
        "Fee": null,
        "Source Name": "Emmanuel UBA",
        "Source Number": "7031366649",
        "Destination Number": "5586696884",
        "Destination Name": "",
        "Transaction Status": "Success",
        "Response Code": "0",
        "Description": "narate",
        "Created At": "2025-09-18 18:20:17",
        "Source Bank": "Opay",
        "Destination Bank": "TeasyPay",
        "destinationBankCode": "100010",
        "sourceBankCode": "100101",
        "sessionID_unit": "11120250511111117",
        "dvaRef": "20250918122"
      }
    ]
  }
}</code></pre>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Initialize highlight.js
            hljs.highlightAll();

            // Add "Copy" button to all <pre> blocks
            const codeBlocks = document.querySelectorAll("pre");
            codeBlocks.forEach((block) => {
                const button = document.createElement("button");
                button.className = "copy-btn";
                button.textContent = "Copy";
                block.appendChild(button);

                button.addEventListener("click", () => {
                    const code = block.querySelector("code").innerText;
                    // Use a fallback for navigator.clipboard.writeText due to iframe security
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(code);
                    } else {
                        const textarea = document.createElement("textarea");
                        textarea.value = code;
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand("copy");
                        document.body.removeChild(textarea);
                    }
                    button.textContent = "Copied!";
                    setTimeout(() => {
                        button.textContent = "Copy";
                    }, 2000);
                });
            });

            // Sidebar and backdrop functionality for mobile responsiveness
            const sidebar = document.getElementById("sidebar");
            const menuToggle = document.getElementById("menu-toggle");
            const backdrop = document.getElementById("backdrop");
            const links = document.querySelectorAll("#sidebar a");

            const toggleSidebar = () => {
                sidebar.classList.toggle("active");
                backdrop.style.display = sidebar.classList.contains("active")
                    ? "block"
                    : "none";
            };

            menuToggle.addEventListener("click", toggleSidebar);
            backdrop.addEventListener("click", toggleSidebar);

            // Hide sidebar on link click
            links.forEach((link) => {
                link.addEventListener("click", () => {
                    if (sidebar.classList.contains("active")) {
                        toggleSidebar();
                    }
                });
            });

            // Active link highlighting for sidebar based on scroll position
            const sections = document.querySelectorAll("h1[id], h2[id], h3[id]");

            const setActiveLink = () => {
                const currentPos =
                    window.scrollY || document.documentElement.scrollTop;
                let activeFound = false;

                // First, remove active class from all links
                links.forEach((link) => link.classList.remove("active"));

                // Then, find and activate the correct link
                for (let i = sections.length - 1; i >= 0; i--) {
                    const section = sections[i];
                    const top = section.offsetTop;

                    if (currentPos >= top - 200) {
                        // Offset for header
                        const matchingLink = document.querySelector(
                            `#sidebar a[href="#${section.id}"]`
                        );
                        if (matchingLink) {
                            matchingLink.classList.add("active");
                        }
                        activeFound = true;
                        break;
                    }
                }

                // If no section is active (e.g., at the very top of the page), activate the "Introduction" link
                if (!activeFound && sections.length > 0) {
                    const firstLink = document.querySelector(
                        `#sidebar a[href="#${sections[0].id}"]`
                    );
                    if (firstLink) {
                        firstLink.classList.add("active");
                    }
                }
            };

            window.addEventListener("scroll", setActiveLink);
            setActiveLink();
        });
    </script>
</body>

</html>